<?php
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700" rel="stylesheet">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Home 1 - Vincent</title>

    <link rel="stylesheet" href="./assets/base/css/kube.css">
    <link rel="stylesheet" href="./assets/base/css/font-awesome.css">
    <link rel="stylesheet" href="./assets/base/css/owl.carousel.min.css">
    <link rel="stylesheet" href="./assets/base/css/style.css">

    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-5G6PPWB');</script>
    <!-- End Google Tag Manager -->
</head>

<body class="vincent_home6 vincent_home1">
    <header class="vincent_header">
        <div class="row ">
            <div class="col col-3 vincent_header_left">
                <div class="vincent_inner">
                    <div class="vincent_inner_h_contact">
                        <div class="vincent_h_phone">+1 215 456 15 15</div>
                        <div class="vincent_h_wh">8:00 am – 11:30 pm</div>
                    </div>
                </div>
            </div>
            <div class="col col-6 vincent_header_center">
                <div class="vincent_def_header">
                    <div class="vincent_logo_cont">
                        <a href="index.html" class="vincent_image_logo">
                        </a>
                    </div>
                    <nav class="vincent_menu_cont">
                        <ul id="menu-main-menu" class="vincent_menu">
                            <li class="menu-item active menu-item-has-children"><a href="#">Home</a>
                                <ul class="sub-menu">
                                    <li class="menu-item vincent_sub_menu_active"><a href="index.html">Home 1</a></li>
                                    <li class="menu-item"><a href="home2.html">Home 2</a></li>
                                    <li class="menu-item"><a href="home3.html">Home 3</a></li>
                                    <li class="menu-item"><a href="home4.html">Home 4</a></li>
                                    <li class="menu-item"><a href="home5.html">Home 5</a></li>
                                    <li class="menu-item"><a href="home6.html">Home 6</a></li>
                                </ul>
                            </li>
                            <li class="menu-item menu-item-has-children"><a href="#">Menu</a>
                                <ul class="sub-menu">
                                    <li class="menu-item"><a href="menu1.html">Menu 1</a></li>
                                    <li class="menu-item"><a href="menu2.html">Menu 2</a></li>
                                    <li class="menu-item"><a href="menu3.html">Menu 3</a></li>
                                </ul>
                            </li>
                            <li class=" menu-item menu-item-has-children"><a href="#">Features</a>
                                <ul class="sub-menu">
                                    <li class="menu-item "><a href="typography.html">Typography</a></li>
                                    <li class="menu-item"><a href="fullscreen-gallery.html">Fullscreen Gallery</a></li>
                                    <li class="menu-item"><a href="404.html">Error 404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item menu-item-has-children"><a href="#">About</a>
                                <ul class="sub-menu">
                                    <li class="menu-item"><a href="about1.html">About 1</a></li>
                                    <li class="menu-item"><a href="about2.html">About 2</a></li>
                                    <li class="menu-item"><a href="team.html">Team</a></li>
                                </ul>
                            </li>
                            <li class="menu-item menu-item-has-children"><a href="#">Blog</a>
                                <ul class="sub-menu">
                                    <li class="menu-item"><a href="blog-fullscreen.html">Blog Fullscreen</a></li>
                                    <li class="menu-item"><a href="blog-grid.html">Blog Grid</a></li>
                                    <li class="menu-item"><a href="blog-standard.html">Blog Standard</a></li>
                                    <li class="menu-item menu-item-has-children"><a href="#">Single Pages<i
                                                class="fa fa-angle-right" aria-hidden="true"></i></a>
                                        <ul class=" sub-menu1">
                                            <li class="menu-item"><a href="standard-post.html">Standard Post</a></li>
                                            <li class="menu-item"><a href="image-post.html">Image Post</a></li>
                                            <li class="menu-item"><a href="video-post.html">Video Post</a></li>
                                            <li class="menu-item"><a href="audio-post.html">Audio Post</a></li>
                                            <li class="menu-item"><a href="qoute-post.html">Quote Post</a></li>
                                            <li class="menu-item"><a href="link-post.html">Link Post</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item menu-item-has-children"><a href="#">Shop</a>
                                <ul class="sub-menu">
                                    <li class="menu-item"><a href="product-listing.html">Product Listing</a></li>
                                    <li class="menu-item"><a href="single-product.html">Single Product</a></li>
                                    <li class="menu-item"><a href="cart.html">Cart</a></li>
                                    <li class="menu-item"><a href="checkout.html">Checkout</a></li>
                                </ul>
                            </li>
                            <li class="menu-item menu-item-has-children"><a href="#">Contact</a>
                                <ul class="sub-menu">
                                    <li class="menu-item"><a href="contact-w-sidebar.html">Contact with Sidebar</a></li>
                                    <li class="menu-item"><a href="contact-w-gallery.html">Contact with Gallery</a></li>
                                    <li class="menu-item"><a href="contact-multiple-maps.html">With Multiple Maps</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <div class="clear"></div>
                </div>
                <div class="mobile_header ">
                    <a href="index.html" class="vincent_image_logo"></a>
                    <a href="javascript:void(0)" class="btn_mobile_menu">
                        <span class="vincent_menu_line1"></span>
                        <span class="vincent_menu_line2"></span>
                        <span class="vincent_menu_line3"></span>
                    </a>
                </div>
            </div>
            <div class="col col-3 vincent_header_right">
                <div class="vincent_inner">
                    <a href="cart.html">
                        <div class="vincent_shopping_cart">


                        <?php
                        // count products in cart
                        $_SESSION['cart']=isset($_SESSION['cart']) ? $_SESSION['cart'] : array();
                        $cart_count=count($_SESSION['cart']);
                        ?>



                            <div class="vincent_total_price">$0.00</div>
                            <div class="vincent_total_items">
                            <?php echo $cart_count; ?> items - View Cart</div>
                            <div class="vincent_cart_item_counter"><?php echo $cart_count; ?></div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="vincent_title_block vincent_corners">
        <div class="vincent_inner_text">
            <h1>Discover Our Products</h1>
        </div>
    </div>
    <div class="row">
        <div class="col col-12 vincent_content">
            <div class="vincent_menu1_block">
                <div class="vincent_container">
                    <div class="container">
                        <ul class='tabs vincent_menu_tabs'>
                            <?php 
                            

// core.php holds pagination variables
include_once 'config/core.php';
$page_title = "Categories";
 

// include database and object files
include_once 'config/database.php';
include_once 'objects/category.php';
include_once 'objects/product.php';
include_once "objects/product_image.php";

 
 

// instantiate database and product object
$database = new Database();
$db = $database->getConnection();
 
$category = new Category($db);
$product = new Product($db);
$product_image = new ProductImage($db);



// query products
$cat_stmt = $category->readAll($from_record_num, $records_per_page);
 
// specify the page where paging is used
$page_url = "categories.php?";
 
// count total rows - used for pagination
while ($row = $cat_stmt->fetch(PDO::FETCH_ASSOC)){
 
            extract($row);
            echo "<li><a href='#{$id}'>{$name}</a></li>";
}
                            ?>
                        </ul>
<?php

$cat_stmt = $category->readAll($from_record_num, $records_per_page);


while ($row = $cat_stmt->fetch(PDO::FETCH_ASSOC)){
 
        extract($row);
        $cat_id = "{$id}";
        $pro_stmt = $product->readForPublic($cat_id);

        echo "<div id='{$id}'>";
            echo '<div class="row gutters">';
            while ($row = $pro_stmt->fetch(PDO::FETCH_ASSOC)){
                extract($row);
                $category_id = "{$category_id}";
                if ($category_id == $cat_id){
                    echo '<div class="col col-3">';
                    echo '  <div class="vincent_menu1_block_item">';
                    echo '      <div class="vincent_prod_list_image_cont">';
                    echo '          <div class="vincent_prod_list_image_wrapper">';
                    echo '              <div class="vincent_team_overlay"></div>';

                    $product_image->product_id=$id;
                    $stmt_product_image=$product_image->readFirst();
 
                    while ($row_product_image = $stmt_product_image->fetch(PDO::FETCH_ASSOC)){
                        echo "              <img src='uploads/images/{$row_product_image['name']}'>";
                    }

                    echo "              <a class='vincent_add_to_cart_button' href='product.php?id={$id}'></a>";
                    echo '          </div>';
                    echo '      </div>';
                    echo "      <h5><a href='product.html'>{$name}</a></h5>";
                    echo "      <p class='vincent_prod_list_text'></p>";
                    echo "      <div class='vincent_prod_list_price'>$ {$price} - {$category_id}</div>";
                    echo '  </div>';
                    echo '</div>';
                } 
            }
            echo "</div>";
        echo "</div>";

}
 
?>

                    </div>
                </div>

            </div>
            <div class="vincent_advantages">
                <div data-parallax='{"y":"45vh","scale":1,"rotate":0,"opacity":1}' class="vincent_parallax_background">
                </div>
                <div class="vincent_container">
                    <div class="row gutters">
                        <div class="col col-4">
                            <div class="vincent_advantages_item vincent_icon_box">
                                <img src="assets/base/img/icon_4.png" alt="">
                                <h4>Quality Products</h4>
                                <p>Sit amet, consectetur adipiscing elit quisque eget maximus velit, non eleifend libero
                                    curabitur dapibus mauris sed leo cursus aliquetcras suscipit.</p>
                            </div>
                        </div>
                        <div class="col col-4">
                            <div class="vincent_advantages_item vincent_icon_box">
                                <img src="assets/base/img/icon_6.png" alt="">
                                <h4>Chemical Free</h4>
                                <p>Sit amet, consectetur adipiscing elit quisque eget maximus velit, non eleifend libero
                                    curabitur dapibus mauris sed leo cursus aliquetcras suscipit.</p>
                            </div>
                        </div>
                        <div class="col col-4">
                            <div class="vincent_advantages_item vincent_icon_box">
                                <img src="assets/base/img/icons_7.png" alt="">
                                <h4>Premier Choice </h4>
                                <p>Sit amet, consectetur adipiscing elit quisque eget maximus velit, non eleifend libero
                                    curabitur dapibus mauris sed leo cursus aliquetcras suscipit.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="vincent_back_to_top"></div>
    <footer>
        <div class="vincent_container">
            <div class="row">
                <div class="col col-12">
                    <div class="vincent_logo_cont">
                        <a href="index.html" class="vincent_image_logo_footer">
                        </a>
                    </div>
                    <div class="vincent_foter_text">+1 215 456 15 15. <span>8:00 am – 11:30 pm</span></div>
                    <ul class="vincent_foter_menu">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="menu1.html">Menu</a></li>
                        <li><a href="fullscreen-gallery.html">Features</a></li>
                        <li><a href="about1.html">About</a></li>
                        <li><a href="blog-grid.html">Blog</a></li>
                        <li><a href="contact-multiple-maps.html">Contact</a></li>
                    </ul>
                    <ul class="vincent_social">
                        <li><a href="https://twitter.com/"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                        <li><a href="https://www.facebook.com/"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                        </li>
                        <li><a href="https://www.instagram.com/"><i class="fa fa-instagram" aria-hidden="true"></i></a>
                        </li>
                    </ul>
                    <div class="vincent_copy_text">Copyright © 2018 Vincent. All Rights Reserved.</div>
                </div>
            </div>
        </div>
    </footer>
    <script src="assets/base/js/jquery-3.2.1.min.js"></script>
    <script src="assets/base/js/jquery.data-parallax.min.js"></script>
    <script src="assets/base/js/owl.carousel.min.js"></script>
    <script src="assets/base/js/kube.js"></script>
    <script src="assets/base/js/index.js"></script>
</body>

</html>